{"versions":[{"hash":"69054b662e25f73c0a92a698ee7abb99ce6eaa12","date":1651412846,"message":"更新介绍","author_name":"forc","author_email":"63189191+forcux@users.noreply.github.com","version":"1"},{"hash":"0d7bdb48fa56408ccf504b79d37a2e83a7ebd4c1","date":1642930118,"message":"移入两个脚本","author_name":"Lemon399","author_email":"1446744399@qq.com","version":"1"}],"meta":{"type":"javascript","name":"错误码介绍","version":"1","tags":["其他脚本"],"synopsis":"在错误页面补充错误代码含义和处理方法","detail":"<p>这个脚本在检测到错误页面 ( chrome-error://chromewebdata/ ) 后，根据错误代码，在页面下方补充错误信息和可能有效的解决方法。</p><p><br></p><p>由于本人知识有限，加上语言描述很差。导致很多错误码不知何意。很多错误码不知如何通俗描述 ( 例如 HTTP/2 和 QUIC 协议相关 )。目前只支持很少错误码 ( 86 / 228 )，欢迎大家补充完善 (错误码列表见&nbsp;<a rel=\"noopener noreferrer\" href=\"https://github.com/chromium/chromium/blob/master/net/base/net_error_list.h\">net_error_list.h</a>&nbsp;) 。</p><p><br></p><p>注意事项：</p><p><br></p><ol><li>由于 X / MT / IU 浏览器 不支持在错误页面执行脚本，所以这些<strong>浏览器目前无法使用这个脚本</strong>。</li><li>Alook / 鲨鱼 / ViaX 和其它内核的浏览器使用了自己的错误页面，所以脚本无法适配。</li></ol><p><br></p>","source":"import { runOnce, runNeed } from '@bext/util';\n\nrunOnce(() => {\n    if (location.href === 'chrome-error://chromewebdata/') {\n        let code = {\n            ERR_ADDRESS_INVALID: ['IP', 'IP 地址错误'],\n            ERR_ADDRESS_UNREACHABLE: ['IP', 'IP 地址不可访问'],\n            ERR_BAD_SSL_CLIENT_AUTH_CERT: ['✸', '浏览器证书损坏'],\n            ERR_BLOCKED_BY_ADMINISTRATOR: ['⊘', '管理员屏蔽'],\n            ERR_BLOCKED_BY_CLIENT: ['⊘', '浏览器屏蔽'],\n            ERR_BLOCKED_BY_CSP: ['⊘', 'CSP 屏蔽'],\n            ERR_BLOCKED_BY_RESPONSE: ['⊘', '服务器屏蔽'],\n            ERR_CERT_AUTHORITY_INVALID: ['✸', '证书不受信任'],\n            ERR_CERT_COMMON_NAME_INVALID: ['✸', '服务器证书损坏'],\n            ERR_CERT_CONTAINS_ERRORS: ['✸', '服务器证书损坏'],\n            ERR_CERT_DATE_INVALID: ['✸', '证书日期错误'],\n            ERR_CERT_INVALID: ['✸', '服务器证书损坏'],\n            ERR_CERT_KNOWN_INTERCEPTION_BLOCKED: ['✸', ''],\n            ERR_CERT_NON_UNIQUE_NAME: ['✸', '服务器证书损坏'],\n            ERR_CERT_NO_REVOCATION_MECHANISM: ['✸', '证书不存在吊销规则'],\n            ERR_CERT_REVOKED: ['✸', '证书被吊销'],\n            ERR_CERT_SYMANTEC_LEGACY: ['✸', '使用了旧版赛门铁克证书'],\n            ERR_CERT_UNABLE_TO_CHECK_REVOCATION: ['✸', '无法检查吊销状态'],\n            ERR_CERT_VALIDITY_TOO_LONG: ['✸', '证书有效期过长'],\n            ERR_CERT_WEAK_KEY: ['✸', '证书秘钥长度不足，安全性过低'],\n            ERR_CERT_WEAK_SIGNATURE_ALGORITHM: ['✸', '证书签名算法安全性过低'],\n            ERR_CLIENT_AUTH_CERT_TYPE_UNSUPPORTED: ['✸', '不支持的证书类型'],\n            ERR_CONNECTION_ABORTED: ['⌘', '连接无响应'],\n            ERR_CONNECTION_CLOSED: ['⌘', '连接已关闭'],\n            ERR_CONNECTION_FAILED: ['⌘', '连接失败'],\n            ERR_CONNECTION_REFUSED: ['⌘', '连接被拒绝'],\n            ERR_CONNECTION_RESET: ['⌘', '连接被重置'],\n            ERR_CONNECTION_TIMED_OUT: ['⌘', '连接超时'],\n            ERR_CONTENT_DECODING_FAILED: ['䷀', '内容解码失败'],\n            ERR_CONTENT_DECODING_INIT_FAILED: ['䷀', '内容解码失败'],\n            ERR_CONTENT_LENGTH_MISMATCH: ['䷀', '内容长度不匹配'],\n            ERR_DISALLOWED_URL_SCHEME: ['://', '此协议被禁止'],\n            ERR_DNS_CACHE_MISS: ['DNS', 'DNS 缓存丢失'],\n            ERR_DNS_MALFORMED_RESPONSE: ['DNS', 'DNS 回复错误'],\n            ERR_DNS_SEARCH_EMPTY: ['DNS', 'DNS 查询为空'],\n            ERR_DNS_SERVER_FAILED: ['DNS', 'DNS 服务器连接失败'],\n            ERR_DNS_SORT_ERROR: ['DNS', 'DNS 排序错误'],\n            ERR_DNS_TIMED_OUT: ['DNS', 'DNS 查询超时'],\n            ERR_EMPTY_RESPONSE: ['<', '服务器响应为空'],\n            ERR_FILE_NOT_FOUND: ['䷀', '文件未找到'],\n            ERR_FILE_PATH_TOO_LONG: ['://', '地址路径过长'],\n            ERR_FILE_TOO_BIG: ['䷀', '文件太大'],\n            ERR_FILE_VIRUS_INFECTED: ['䷀', '文件感染了病毒'],\n            ERR_HTTP_RESPONSE_CODE_FAILURE: ['<', 'HTTP 响应码未知'],\n            ERR_ICANN_NAME_COLLISION: ['DNS', 'ICANN 命名冲突'],\n            ERR_INSECURE_RESPONSE: ['<', '回复不安全'],\n            ERR_INTERNET_DISCONNECTED: ['⌘', '网络未连接'],\n            ERR_INVALID_HTTP_RESPONSE: ['<', 'HTTP 响应不正确'],\n            ERR_INVALID_REDIRECT: ['>>', '重定向不正确'],\n            ERR_INVALID_RESPONSE: ['<', '回复不正确'],\n            ERR_INVALID_SIGNED_EXCHANGE: ['✸', '签名交换不正确'],\n            ERR_INVALID_URL: ['://', '地址不正确'],\n            ERR_NAME_NOT_RESOLVED: ['DNS', 'DNS 未回复域名'],\n            ERR_NAME_RESOLUTION_FAILED: ['DNS', '域名解析失败'],\n            ERR_NETWORK_ACCESS_DENIED: ['⌘', '浏览器无权访问网络'],\n            ERR_NETWORK_CHANGED: ['⌘', '网络连接改变'],\n            ERR_NO_BUFFER_SPACE: ['⬇', '没有足够的缓存空间'],\n            ERR_NO_PRIVATE_KEY_FOR_CERT: ['✸', '证书没有私钥'],\n            ERR_OUT_OF_MEMORY: ['⬇', '内存溢出'],\n            ERR_REQUEST_RANGE_NOT_SATISFIABLE: ['>', '请求范围不匹配'],\n            ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_DISPOSITION: ['<', '响应头错误'],\n            ERR_RESPONSE_HEADERS_MULTIPLE_CONTENT_LENGTH: ['<', '响应头错误'],\n            ERR_RESPONSE_HEADERS_MULTIPLE_LOCATION: ['<', '响应头错误'],\n            ERR_RESPONSE_HEADERS_TOO_BIG: ['<', '响应头过大'],\n            ERR_RESPONSE_HEADERS_TRUNCATED: ['<', '响应头不完整'],\n            ERR_SSL_CLIENT_AUTH_CERT_BAD_FORMAT: ['✸', '浏览器证书损坏'],\n            ERR_SSL_CLIENT_AUTH_CERT_NO_PRIVATE_KEY: ['✸', '浏览器证书损坏'],\n            ERR_SSL_CLIENT_AUTH_NO_COMMON_ALGORITHMS: ['✸', '浏览器证书不支持'],\n            ERR_SSL_CLIENT_AUTH_PRIVATE_KEY_ACCESS_DENIED: ['✸', '浏览器证书无法访问'],\n            ERR_SSL_CLIENT_AUTH_SIGNATURE_FAILED: ['✸', '浏览器证书签名失败'],\n            ERR_SSL_DECRYPT_ERROR_ALERT: ['✸', '内容解密错误'],\n            ERR_SSL_HANDSHAKE_NOT_COMPLETED: ['⌘', 'SSL 握手没有完成'],\n            ERR_SSL_KEY_USAGE_INCOMPATIBLE: ['✸', '证书用途不兼容'],\n            ERR_SSL_OBSOLETE_CIPHER: ['✸', '证书使用了过时的加密算法'],\n            ERR_SSL_OBSOLETE_VERSION: ['✸', '证书使用了过时的版本'],\n            ERR_SSL_PROTOCOL_ERROR: ['✸', 'SSL 协议错误'],\n            ERR_SSL_SERVER_CERT_BAD_FORMAT: ['✸', '服务器证书损坏'],\n            ERR_SSL_SERVER_CERT_CHANGED: ['✸', '服务器证书已改变'],\n            ERR_SSL_VERSION_OR_CIPHER_MISMATCH: ['✸', 'SSL 加密算法或版本不匹配'],\n            ERR_TIMED_OUT: ['⌘', '处理超时'],\n            ERR_TOO_MANY_REDIRECTS: ['>>', '重定向次数过多'],\n            ERR_TOO_MANY_RETRIES: ['>', '尝试次数过多'],\n            ERR_UNKNOWN_URL_SCHEME: ['://', '地址的协议未知'],\n            ERR_UNSAFE_PORT: ['IP', '使用了不安全的端口'],\n            ERR_UNSAFE_REDIRECT: ['>>', '重定向不安全'],\n            ERR_UNSUPPORTED_AUTH_SCHEME: ['✸', '不支持的验证方法']\n        }, type = {\n            '://': '遇到了地址错误，检查地址吧。如果不是手动输入的，可能是某个 APP 专用的',\n            'IP': '遇到了地址错误，检查地址吧',\n            '⊘': '被屏蔽了呢',\n            '✸': '遇到了安全方面的错误，如果错误类似 \"不支持的...\"，试着更新浏览器或内核版本，如果错误类似 \"浏览器证书损坏\"，检查系统或浏览器内置和导入的证书，都不是的话就是对面的问题',\n            '⌘': '遇到了连接错误，试试刷新，或者检查网络设置，切换网络，检查浏览器权限，等等。如果都没问题，那就是对面的问题，或者是不可描述的问题',\n            '䷀': '遇到了内容处理错误',\n            'DNS': '遇到了域名解析错误，试试切换网络，或者检查网络设置，如果没问题，可能是域名过期或者没注册',\n            '⬇': '遇到了存储问题，清理下手机吧',\n            '>': '遇到了请求错误，如果错误是 \"请求范围不匹配\"，证明你没有达到要求，对方拒绝访问。不是的话，尝试刷新或者切换网络',\n            '<': '遇到了响应错误，大多是对面的问题',\n            '>>': '遇到了重定向错误，大多是对面的问题，试试刷新，或者换其它浏览器',\n            '?': '遇到了未知错误，你可以用其它浏览器试试，或者上网搜后面的错误代码，祝你好运',\n        };\n        runNeed(()=>document.querySelector('p'), ()=>{\n            let err = document.querySelectorAll('p')[1].innerText.slice(5),\n                title = (code.hasOwnProperty(err)) ? code[err] : ['?', '未知错误'],\n                desp = type[title[0]];\n            document.body.insertAdjacentHTML('beforeend', `<p><strong>${title[1]}</strong><br/><strong>${desp}</strong></p>`);\n        });\n    }\n})"},"hash":"69054b662e25f73c0a92a698ee7abb99ce6eaa12"}