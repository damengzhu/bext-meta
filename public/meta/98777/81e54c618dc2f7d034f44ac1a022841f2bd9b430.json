{"type":"javascript","name":"纪念模式","version":"5","tags":["美化脚本"],"synopsis":"bextButton 版本的 纪念模式，让网页变为黑白样式","detail":"<p class=\"ql-align-center\">bextButton 示例脚本，增加 <span style=\"color: rgb(255, 255, 255); background-color: rgb(102, 163, 224);\"> 纪念 </span> 按钮。</p><p class=\"ql-align-center\">使用 CSS <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter\" rel=\"noopener noreferrer\">filter</a> 滤镜实现。</p><p class=\"ql-align-center\"><br></p><p class=\"ql-align-center\">这个脚本运行需要 WebView 53+ 内核。</p>","extra":{"xMetaComment":"// @run-at document-end"},"source":"import { runOnce, addStyle, runMatch, runNeed } from '@bext/util';\nimport { bextButton } from '@bext/ui';\nimport config from '@bext/config';\n\nrunOnce(() => {\n    if (!config.hasOwnProperty('black')) config.black = [];\n    if (!config.hasOwnProperty('white')) config.white = [];\n    runMatch({\n        black: config.black,\n        white: config.white,\n        full: true\n    }).then(() => {\n        runNeed(\n            () => document.body,\n            () => {\n                let style = null,\n                    doGray = (enable, btn) => {\n                        if (enable) {\n                            style = addStyle(':root { filter : grayscale(1) !important; }');\n                            btn.btnColor = 'black';\n                            btn.text = '关闭';\n                        } else {\n                            style.remove();\n                            style = null;\n                            btn.btnColor = 'deepskyblue';\n                            btn.text = '纪念';\n                        }\n                    },\n                    button = bextButton({\n                        text: '纪念',\n                        btnColor: 'deepskyblue',\n                        textColor: 'white',\n                        offsetY: window.innerHeight / 10,\n                        btnStyle: 'font-size: 12px; border-radius: 5px;',\n                        click: btn => doGray(!style, btn),\n                    });\n                button.push();\n                if (config.enable) doGray(true, button);\n            });\n    });\n})","configSchema":{"type":"object","properties":{"black":{"type":"array","items":{"type":"string","description":"关键字匹配，不支持通配符。\n支持正则，开头结尾要用 //\n如 //(\\w+\\.)?baidu\\.com//","title":"黑名单关键字"},"title":"网址黑名单"},"white":{"type":"array","items":{"type":"string","description":"关键字匹配，不支持通配符。\n支持正则，开头结尾要用 //\n如 //(\\w+\\.)?baidu\\.com//","title":"白名单关键字"},"title":"网址白名单"},"enable":{"type":"boolean","title":"默认开启"}},"required":["enable"]},"defaultConfig":{"enable":true}}