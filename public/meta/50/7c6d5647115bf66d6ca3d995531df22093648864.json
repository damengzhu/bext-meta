{"type":"javascript","name":"指定链接跳转方式","version":"2","synopsis":"强制用新标签或当前标签打开","tags":["工具脚本","其他脚本"],"detail":"<p>搬运自 <a rel=\"noopener noreferrer\" href=\"http://via-app.cn/#/pluginDetail/50\">Via 轻插件</a> ，作者 <a rel=\"noopener noreferrer\" href=\"http://via-app.cn/#/user/28\">Sky</a></p><p>对原脚本进行如下修改 ：</p><ul><li>适配本站安装选项</li><li>修复运行时机问题</li></ul><p>以下是原版介绍，去掉了 脚本作用 部分：</p><p><br></p><h2><span style=\"background-color: rgb(250, 204, 204);\"> </span> 何时作用：</h2><p><br></p><p>等页面加载完成后开始运行，对于某些动态添加进来或其它不按套路出牌的链接可能无效，仅作用于 <span style=\"color: rgb(240, 102, 102);\">&lt;a&gt; &lt;/a&gt;</span> 类链接。</p><p><br></p><h2><span style=\"background-color: rgb(250, 204, 204);\"> </span> 测试链接</h2><p><br></p><p><a style=\"color: rgb(240, 102, 102);\" rel=\"noopener noreferrer\" href=\"https://m.baidu.com/s?word=%E8%99%8E%E6%89%91\"><strong>测试地址</strong></a></p><p><br></p><ul><li>安装完脚本最好先刷新一遍。</li></ul><p><br></p><h2><span style=\"background-color: rgb(250, 204, 204);\"> </span> 可能存在的BUG：</h2><p><br></p><p>强制指定链接使用某种方式跳转可能会出现意想不到的副作用！</p><p><br></p><h2><span style=\"background-color: rgb(250, 204, 204);\"> </span> 免责声明：</h2><p><br></p><ul><li>此插件仅适用于个人技术研究学习，请勿商用。</li><li>出现任何法律纠纷，与作者无关。</li></ul><p><br></p><p>这个脚本使用了 Bext 的函数 runAt，</p><p>如需二次发布 ( 分享，搬运 等等 ) ，</p><p>需要在显著位置包含如下 MIT 许可文本:</p><p><br></p><p><br></p><pre spellcheck=\"false\" class=\"ql-syntax\">MIT License\nCopyright (c) 2022 ikkz\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n</pre><p><br></p>","source":"/*\n * @name: 指定链接跳转方式\n * @Author: Sky\n * @version: 1.4\n * @description: 强制用新标签或当前标签打开\n * @include: *\n * @createTime: 2020-5-26 01:00\n * @updateTime: 2020-10-9 21:00\n */\nimport { runAt } from '@bext/util';\nimport config from '@bext/config';\nrunAt('document-end',()=>{\n(function(){const\n/* 等号后的数可修改\n 1表示强制用新标签\n 0表示强制用本标签 */\n newTag = config.newTag,\n/*－－－－以下勿改－－－－*/\nkey=encodeURIComponent('链接跳转方式:执行判断'),newMode=newTag?'_blank':'_self';if(window[key]){return;}try{window[key]=true;let allowRun=true;function setAtt(){if(allowRun){allowRun=false;for(let a of document.getElementsByTagName('a')){a.removeAttribute('target');}setTimeout(()=>{allowRun=true},1000)}}const base=document.head.getElementsByTagName('base')[0];if(base){base.target=newMode;}else{const be=document.createElement('base');be.target=newMode;document.head.appendChild(be);}window.addEventListener(\"load\",setAtt,{'passive':true});document.addEventListener(\"touchend\",setAtt,{'passive':true});}catch(err){console.log('链接跳转方式：',err);}})();\n});","configSchema":{"type":"object","properties":{"newTag":{"type":"boolean","description":"取消勾选会强制在原标签打开","title":"在新标签打开"}},"required":["newTag"]},"defaultConfig":{"newTag":true}}